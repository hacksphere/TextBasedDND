(function(){var t={}.hasOwnProperty,e=function(e,o){function n(){this.constructor=e}for(var r in o)t.call(o,r)&&(e[r]=o[r]);return n.prototype=o.prototype,e.prototype=new n,e.__super__=o.prototype,e};this.Item=function(){function t(){}return t.prototype.use=function(){},t}(),this.Die=function(){function t(t,e,o){this.numberOfDice=t,this.numberOfSides=e,this.constant=o}return t.prototype.roll=function(){var t,e,o,n;for(e=this.constant,t=o=1,n=this.numberOfDice;n>=1?n>=o:o>=n;t=n>=1?++o:--o)e+=Math.random()*this.numberOfSides;return Math.floor(Math.max(e,0))},t.prototype.toString=function(){return this.numberOfDice+"d"+this.numberOfSides+"+"+this.constant},t}(),this.Weapon=function(t){function o(t,e,o){this.die=t,this.name=e,this.price=o}return e(o,t),o.prototype.roll=function(){return this.die.roll()},o.prototype.toString=function(){return this.name.toString()+": "+this.die.toString()+" ("+this.price.toString()+"gp)"},o}(Item),this.Monster=function(){function t(t,e,o,n,r){this.hp=e,this.weapon=o,this.gp=n,this.xp=r,this.name=randomAdjective()+" "+t}return t.prototype.roll=function(){return this.weapon.roll()},t.prototype.hit=function(t){return this.hp-=t},t.prototype.isDead=function(){return this.hp<=0},t.prototype.toString=function(){return this.name},t}(),this.Potion=function(t){function o(){}return e(o,t),o}(Item),this.HealthPotion=function(t){function o(){}return e(o,t),o.prototype.use=function(){var t;return hp+=10,t=inventory.indexOf(this),inventory.splice(t,1)},o.prototype.toString=function(){return"Health Potion"},o}(Potion),this.EvasionPotion=function(t){function o(){}return e(o,t),o.prototype.use=function(){},o.prototype.toString=function(){return"Evasion Potion"},o}(Potion),this.BlockPotion=function(t){function o(){}return e(o,t),o.prototype.use=function(){},o.prototype.toString=function(){return"Block Potion"},o}(Potion)}).call(this),function(){this.smallDagger=new Weapon(new Die(3,6,3),"Dagger of awesome",200),this.daggerofshadow=new Weapon(new Die(3,7,2),"Dagger of Shadow",500),this.daggerofdeath=new Weapon(new Die(3,8,3),"Dagger of Death",600),this.swordofthefeather=new Weapon(new Die(3,8,-3),"Sword of the feather",300),this.supersword=new Weapon(new Die(6,6,-6),"Super Sword",600),this.swordofthesun=new Weapon(new Die(5,9,-5),"Sword of the Sun",750),this.longbowoffire=new Weapon(new Die(5,4,-5),"Long Bow of Fire",400),this.powerfulllongbow=new Weapon(new Die(6,4,0),"powerfull longbow",400)}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};this.print=function(t){return $(".game").append(t)},this.println=function(t){return print(t),print("<br>")},this.setState=function(t){return this.state=t,run()},this.loadState=function(){return returnToState},this.button=function(t,e){return println("<button onclick=\"setState('"+t+"')\">\n"+e+"\n</button>")},this.dropDown=function(t){var e,o,n,r;for(o="<select>",n=0,r=t.length;r>n;n++)e=t[n],o+="<option>",o+=e,o+="</option>";return o+="</select>"},this.prob=function(t){return Math.random()<=t},this.inBounds=function(t,e){return t>=0&&e>=0&&4>t&&4>e},this.randomAdjective=function(){return["Mean","Nasty","Terrible"][Math.floor(3*Math.random())]},this.showMap=function(){return inBounds(this.locY+1,this.locX)&&this.map[this.locY+1][this.locX]&&button(this.map[this.locY+1][this.locX],"Head south to the "+this.map[this.locY+1][this.locX]),inBounds(this.locY-1,this.locX)&&this.map[this.locY-1][this.locX]&&button(this.map[this.locY-1][this.locX],"Head north to the "+this.map[this.locY-1][this.locX]),inBounds(this.locY,this.locX+1)&&this.map[this.locY][this.locX+1]&&button(this.map[this.locY][this.locX+1],"Head east to the "+this.map[this.locY][this.locX+1]),inBounds(this.locY,this.locX-1)&&this.map[this.locY][this.locX-1]?button(this.map[this.locY][this.locX-1],"head west to the "+this.map[this.locY][this.locX-1]):void 0},this.visited=function(e){return t.call(this.statesEntered,e)>=0},this.printstat=function(t){return $(".stats").append("<br>"),$(".stats").append(t)},this.useInventoryItemN=function(t){return this.inventory[t].use(),console.log("TEST")},this.refresh=function(){var t,e,o,n,r,i,a,s,h;for($(".stats").html(""),s=this.enemies,n=0,i=s.length;i>n;n++)t=s[n],printstat(""),printstat("Enemy stats:"),printstat("HP: "+t.hp);for(printstat(""),printstat("Your stats:"),printstat("HP: "+this.hp),printstat("MP: "+this.mp),printstat("GP: "+this.gp),printstat("XP: "+this.xp),printstat(""),printstat("Weapon:"),printstat(""+this.weapon),$(".inventory").html(""),$(".inventory").append("Inventory"),$(".inventory").append("<br>"),$(".inventory").append("-------------"),$(".inventory").append("<br>"),e=0,h=this.inventory,r=0,a=h.length;a>r;r++)o=h[r],$(".inventory").append("<br>"),$(".inventory").append('<button onclick="useInventoryItemN('+e+')">\n'+e+"\n"+o.toString()+"\n</button>"),e++;return setTimeout(refresh,1e3)}}.call(this),function(){this.goblin=function(){return new Monster("Goblin",smallHP.roll(),smallDamage,smallDrop.roll(),10)},this.dwarfBeserker=function(){return new Monster("Dwarf Beserker",smallHP.roll(),mediumDamage,mediumDrop.roll(),30)},this.animatedCactus=function(){return new Monster("Animated Cactus",mediumHP.roll(),smallDamage,smallDrop.roll(),20)},this.riverMonster=function(){return new Monster("River Monster",largeHP.roll(),mediumDamage,largeDrop.roll(),50)},this.horseMan=function(){return new Monster("Horse Man",smallHP.roll(),mediumDamage,mediumDrop.roll(),30)},this.paladin=function(){return new Monster("Ajurite Paladin",largeHP.roll(),largeDamage,largeDrop.roll(),100)},this.zombie=function(){return new Monster("Zombie",mediumHP.roll(),mediumDamage,mediumDrop.roll(),40)},this.largeZombie=function(){return new Monster("Terrible Zombie",largeHP.roll(),mediumDamage,mediumDrop.roll(),40)},this.corruptedOrc=function(){return new Monster("Corrupted Orc",mediumHP.roll(),mediumDamage,mediumDrop.roll(),30)},this.spider=function(){return new Monster("Spider",smallHP.roll(),mediumDamage,mediumDrop.roll(),25)}}.call(this),function(){this.townStatesRun=function(){var t,e,o;return o=1e3*this.evade+100,e=100*this.block+10,"inTown"===this.state?(println("You are in the town of Zemboria"),println("What do you want to do?"),button("town of Zemboria","Leave town"),button("shops","Look at the shops"),button("people","Talk to people"),button("Trainer","Go to the Trainer")):"Trainer"===this.state?(println("Trainer: I can upgrade your block or evade."),button("upgrade block","Upgrade Block to "+(block+1)+" ("+e+" xp)"),button("upgrade evade","Upgrade Evade to "+(this.evade+.1)+" ("+o+" xp)")):"upgrade evade"===this.state?(this.xp>=o?(this.xp-=o,this.evade+=.1,println("You train and train and you finally get stronger")):println("I aint gonna train you if you arent going to pay me my price."),setState("Trainer")):"upgrade block"===this.state?(this.xp>=100*this.block?(this.xp-=100*this.block,this.block+=1,println("You train and train and you finally get more agile")):println("I aint gonna train you if you arent going to pay me my price."),setState("Trainer")):"shops"===this.state?(println("The shops are small but friendly"),button("blacksmith","Visit John the Blacksmith"),button("fletcher","Visit Ken the Fletcher"),button("mage","Visit Almerond the Mage"),button("inTown","Done shopping")):"town of Zemboria"===this.state?(println("Which way do you want to go?"),button("inTown","Enter the town"),showMap()):"blacksmith"===this.state?(println("John: Hello there, what can i do for you?"),button("daggers","I'd like to look at your daggers."),button("swords","I'd like to take a look at your swords."),button("shops","Leave the Blacksmith")):"daggers"===this.state?(println("Here's what I've got"),this.returnToState=this.state,button(smallDagger,smallDagger),button(daggerofshadow,daggerofshadow),button(daggerofdeath,daggerofdeath),button("aboutDaggers","Can you tell me more about daggers?"),button("blacksmith","I guess I'm not interested in daggers")):"aboutDaggers"===this.state?(println("Daggers are small and fast. Some daggers will let you strike twice per turn, some daggers are poisoned."),button("daggers","Thanks.")):"swords"===this.state?(println("These are the swords I've got."),this.returnToState=this.state,button(swordofthefeather,swordofthefeather),button(supersword,supersword),button(swordofthesun,swordofthesun),button("aboutSwords","Can you tell me more about swords?"),button("blacksmith","I'm not really interested in swords")):"aboutSwords"===this.state?(println("Swords are powerful and balanced. They tend to do more damage than daggers, but are more expensive."),button("swords","Thanks.")):"fletcher"===this.state?(println("Ken: Hello there me matey. What can I do for you on this fine day?"),button("crossbows","Might i have a look at your crossbows."),button("longBows","i'll take a look at your long bows."),button("shops","Leave the Fletcher")):"crossbows"===this.state?println("Here's what I've got in the way of crossbows."):"mage"===this.state?(println("You see a musty old shop with magical stuff everywhere. All over the shelves of the shop you see Hydra heads, slamander tails, frog tongue and other such magical things."),println("You hear a booming voice: What do you want youngster? I was just taking a magicians nap!"),visited("mage")||println("You may call me Almerond."),button("potions","May I look at your potion selection?"),button("staffs","What staffs do you have?"),button("scrolls","What in the way of scrolls do you have?"),button("heal","Heal 10 hp (100 gp)"),button("enchant","Enchant Weapon (500 gp)"),button("shops","I'm sorry for intruding, Almerond. Thank you.")):"enchant"===this.state?(t=500,this.gp>=t?(this.weapon.die.numberOfDice+=1,this.gp-=t,println("Your weapon has been enchanted.")):println("What you trying to do, scamp."),setState("mage")):"heal"===this.state?(t=100,this.gp>=t?(println("You pay "+t+" gp"),this.hp+=10,this.gp-=t):(println("you trying to cheat me boy."),setState("mage"))):"potions"===this.state?(println("Potions will give you momentary advantages over enemies but they only last for a single battle."),button("Health Potion buying","Buy Health potion (30 gp)")):"staffs"===this.state?(println("Staffs are what make the mage, if you watched lord of the rings you would know that."),setState("mage")):"scrolls"===this.state?(println("Scrolls are powerfull spells that can decimate your enemy."),setState("mage")):"Health Potion buying"===this.state?(gp>=30?(gp-=30,inventory.push(new HealthPotion)):println("You trying to cheat me scamp!!!"),setState("mage")):"people"===this.state?prob(.25)?setState("Dungeon guy"):prob(.5)?setState("mayor"):(println("No one is out and about."),setState("inTown")):"Dungeon guy"===this.state?visited("Dungeon guy win")?println("Thank you so much i cant ever thank you enough"):visited("Dungeon guy")&&visited("Zealon Dungeon")?setState("Dungeon guy win"):(println("Howdy, stranger. My name is Alastor. Let me tell you my story."),println("My family's heirloom, a great horn that my great great great grandfather used in the great guild wars, one day dissapeared. I raised a hue and cry and paid the best trackers around to find the people that stole it. They eventually tracked them down to the Zealon Dungeon. I tried to hire people to kill them and get my horn back but everyone was to scared to venture into the Zealon Dungeon. So I wish for you to go in there, kill them and get me my horn back. I'll reward you 1000 gold for retrieving the horn."),button("inTown","I'll see what I can do.")):"Dungeon guy win"===this.state?(this.gp+=1e3,println("thank you so much i cant ever thank you enough!!! Heres 1000 gp for getting my heirloom."),button("inTown","My pleasure.")):"mayor"===this.state?visited("mayor win")?println("Thanks"):println("Ever since the great guild wars that ravaged this land long ago,				 The land has been infested with every sort of nasty mosnter.			 The goblins are the worst though,			 They raid the villages of alavar. 			 They are a menace to everyone.			 So i wish for you to go and raid them.			 I will pay you 500 gold (kill 5 goblins)."):this.state===smallDagger.toString()?(this.gp>=smallDagger.price?(this.gp-=smallDagger.price,this.weapon=smallDagger,println("Congratulations on buying the Dagger of awesome. You look at it and see that its awesome")):println("Take your hands off that dagger. You aint got the money to pay for that beauty."),setState(loadState())):this.state===swordofthefeather.toString()?(this.gp>=swordofthefeather.price?(this.gp-=swordofthefeather.price,this.weapon=swordofthefeather,println("You pick up the sword and it is incredibly light. It feels wonderful in your hands.")):println("Get out of here cheapskate."),setState(loadState())):this.state===supersword.toString()?(this.gp>=supersword.price?(this.gp-=supersword.price,this.weapon=supersword,println("You pick up the sword and suddenly you feel like super man. You feel like you can do anything.")):println("Get out of here cheapskate."),setState(loadState())):this.state===swordofthesun.toString()?(this.gp>=swordofthesun.price?(this.gp-=swordofthesun.price,this.weapon=swordofthesun,println("You pick up the sword and it glows with an angelic light.")):println("Dont come back here Hobo."),setState(loadState())):this.state===daggerofshadow.toString()?(this.gp>=daggerofshadow.price?(this.gp-=daggerofshadow.price,this.weapon=daggerofshadow,println("you can barely see the dagger its so cloaked by Shadow. it is cold to the touch.")):println("Set your hands of that dagger."),setState(loadState())):this.state===daggerofdeath.toString()?(this.gp>=daggerofdeath.price?(this.gp-=daggerofdeath.price,this.weapon=daggerofdeath,println("This dagger has the stench of Death. it had perpetual blood on its edge. No matter how much you wipe it never comes of.")):println("Stop touching that beauty, poor guy. You can't afford it."),setState(loadState())):this.state===powerfulllongbow.toString()?(this.gp>=powerfulllongbow.price?(this.gp-=powerfulllongbow.price,this.weapon=powerfulllongbow,println("You heft the beautiful long bow and then throw it over your shoulder.")):println("You aint got the money te pay for that beauty, so go away."),setState(loadState())):this.state===longbowoffire?(this.gp>=longbowoffire.price?(this.gp-=longbowoffire.price,this.weapon=longbowoffire,println("There are beautiful carvings of fire and in the darkness those engravings flicker like fire. (he says reverantly)")):println("Get your hands of that ye scurvy scallywag, that one of my best bows. Unless yev actually got te gold for it."),setState(loadState())):void 0}}.call(this),function(){this.mapStatesRun=function(){var t;if("forest"===this.state)return println("The forest is dark and spooky"),visited(this.state)?prob(.5):(println("You find a frog who blesses you (+5 hp)"),this.hp+=5),button("upTree","Climb a tree"),showMap();if("upTree"===this.state)return visited("upTree")?println("You and Murundy are in the top of the tree, in the middle of the Monkey's forest."):(println("You see an old monkey at the top of the tree"),println("Murundy: Welcome to the land of the Monkeys, young one."),println("Murundy: My name is Murundy, and I am a sage among the Monkeys here.")),button("askAboutForests","What can you tell me about these forests?"),button("forest","Climb down the tree");if("askAboutForests"===this.state)return println("Murundy: The forests have been the land of the Monkeys for over a century.  But this last year the Spiders have moved in, driven by some unnatural force."),button("showSpiderForest","Would you take me to where the spiders are?"),button("forest","Climb down the tree");if("showSpiderForest"===this.state)return println("Murundy: Certainly. But be prepared for what you are about to see."),println("Murundy: I'll take you on a path through the branches. Follow me"),button("spiderForestUpTree","Follow Murundy"),button("forest","Climb down the tree");if("spiderForestUpTree"===this.state)return println("You find yourself in a darker part of the forest, and vast sticky cobwebs are strung hanging between the trees."),println("Murundy: See the egg-sacks between the root of the trees? These spiders are reproducing out of control. We don't know why."),button("upTree","I've seen enough. Please take me back."),button("Spider Forest","Climb down the tree");if("Spider Forest"===this.state)return println("The trees are tangled with cobwebs and the roots have egg-sacks strung between their roots."),prob(.5)?(println("A spider clambers down from the trees and lunges at you."),this.enemies=[spider()],button("fightYourTurn","Engage him"),this.returnToState=this.state):(println("you get tangled in a cobweb (-2 hp)"),this.hp-=2,button("eggSacks","Investigate egg-sacks"),showMap());if("eggSacks"===this.state)return println("You see larvae swarming inside of translucent pouches."),button("breakEggSacks","Break egg-sack"),button("Spider Forest","Done inestigating egg-sacks");if("breakEggSacks"===this.state)return println("A baby spider crawls on to your hand and tries to bite you with its mandibles."),this.enemies=[babySpider()],this.returnToState=this.state,button("fightYourTurn","Fight the Baby Spider");if("swamp"===this.state)return println("The swamps glurp and gurgle at you"),prob(.5)?(println("A goblin rises out of the black deep"),this.enemies=[goblin()],button("fightYourTurn","Engage him"),this.returnToState=this.state):(println("Your boots get mucky"),showMap());if("deeper swamp"===this.state)return println("The swamp is almost unbearebly thick. It smells like mold and like orc."),prob(.5)?(println("A corrupted orc rises from the muck"),this.enemies=[corruptedOrc()],button("fightYourTurn","Engage him"),this.returnToState=this.state):(println("The swamp mud mucks up your boots."),showMap());if("marshes"===this.state)return println("The marshes are marshy"),showMap();if("desert"===this.state)return println("The desert is hot and dry. It continues for great lengths to the south, but yields to foothills to the north. There are serious-looking cacti."),prob(.25)&&(println("You accidentally got a spine in you. (-3 hp)"),this.hp-=3),showMap();if("wasteland"===this.state)return println("The wasteland is the result of a Scilos experiment gone wrong. It's a parched and lifeless desert as far as the eye can see. You are miserably thirsty."),prob(.5)?(println("A cactus starts to move towards you."),this.enemies=[animatedCactus()],button("fightYourTurn","Engage the Animated Cactus"),this.returnToState=this.state):showMap();if("Beara Mountains"===this.state)return println("The air is thin and hard to breathe, and you see crevasses stretching far below you."),prob(.5)?(println("Suddenly, a dwarf beserker charges at you from a cliff above."),this.enemies=[dwarfBeserker()],button("fightYourTurn","Engage the Beserker"),this.returnToState=this.state):showMap();if("foothills"===this.state)return println("The ground is rough and treacherous, and the going is hard but you eventually make it to a good campground."),prob(.5)?(println("While you are sleeping a savage horseman attacks you!"),this.enemies=[horseMan()],button("fightYourTurn","Engage the Horseman"),this.returnToState=this.state):showMap();if("Lake Mysterious"===this.state)return println("The lake goes out as far as the eye can see its absolutely enormous."),println("there is a slight disturbance in the water... you wonder what it is..."),prob(.5)?(println("suddenly an enourmous octopus arises from the water."),this.enemies=[riverMonster()],button("fightYourTurn","Engage the Octopus"),this.returnToState=this.state):showMap();if("Zealon Dungeon"===this.state)return println("You see cut into the side of a hill the Zealon emblem, a skull inside of a circle made of snakes. Entranced, you walk closer and see that the gaping mouth of the skull leads to a room underground. It's darkeness is impenetrable."),button("enteranceRoom","Enter the Zealon Dungeon"),showMap();if("enteranceRoom"===this.state)return println("You find yourself in a small room with walls that are coated in dried blood. The walls seem to press in on you. Your compass goes haywire. Your internal instincts are screaming at you to turn back."),button("entrance corridor","Go further in to the Dungeon"),button("Zealon Dungeon","Exit Dungeon");if("entrance corridor"===this.state)return println("You walk in to a long narrow corridor. It has strange symbols and markings on the ground. It seems to be a kind of warning"),visited(this.state)?(button("junctionRoom","Head deeper into the darkness"),button("enteranceRoom","Head back towards the light")):prob(.5)?(println("A zombie raises itself out of the dirt."),this.enemies=[zombie()],button("fightYourTurn","Engage the Zombie"),this.returnToState=this.state):(println("A spike-trap beneath your feet shoots up and stabs you. You lose 10 hp."),this.hp-=10,button("junctionRoom","Head deeper into the darkness"),button("enteranceRoom","Head back towards the light"));if("junctionRoom"===this.state)return println("You are in a large room with three corridors leading out of it."),t=Math.ceil(3*Math.random()),println("An ill odor fills the room and your lungs. You lose "+t+" hp."),this.hp-=t,visited(this.state)?(button("leftCorridor","Enter the corridor on the left"),button("rightCorridor","Enter the corridor on the right"),button("entrance corridor","Go back towards the enterance")):(println("A giant Zombie raises itself out of the filthy ground. It reaches its long fingers towards you."),this.enemies=[largeZombie()],button("fightYourTurn","Engage the Zombie"),this.returnToState=this.state);if("leftCorridor"===this.state)return println("Deeper into the dungeon, you see an open room. A huge, engraved chest sits at the back of the room."),button("junctionRoom","Go towards the enterance"),button("leftRoom","Go deeper");if("leftRoom"===this.state){if(!visited(this.state))return println("As you enter the room, the door slams behind you and a towering orc smiles a sister grin at you."),button("leftRoom fight","Attack him"),button("leftRoom talk","Go up to him")}else{if("leftRoom fight"===this.state)return println("You meet the battle with gusto."),this.enemies=[corruptedOrc()],setState("fightYourTurn"),this.returnToState="leftRoom";if("leftRoom talk"===this.state)return println("You walk up to the orc"),button("hello","Hello");if("hello"===this.state)return println("Hello my name is Chenk."),button("whatGoingOn","What's going on with this dungeon?");if("whatGoingOn"===this.state)return println("Chenk: This is a dungeon created by the Zealon for their sinis†er rites."),button("whyareyouhere","Why are you here? And why havent you attacked me?");if("whyareyouhere"===this.state)return println("I am here because the Zealon experimented their corruption magic on me but it backfired. Orcs arent all bad you know its just that the Zealon corrupted many of my kind. I cant leave the dungeon because of some strange magic."),button("more","Wow the Zealon are really bad!");if("more"===this.state)return println("Chenk: The Zealon are bad but its debatable if they are the worst. The Ajurites are also pretty bad. They are good but over-zealous. They will kill hundreds of people just because one person did something bad. Then there are the Scilos. They are a group of mad scientists who are ruthless in the name of science. They do all kinds of experiments on people and animals."),button("leftRoom","Wow. Thank you.");if("rightRoom"===this.state)return println(""),button("junctionRoom","Go towards the enterance");if("Plain of Ashard"===this.state)return println("A paladin in blazing white armor rides up and greets you as you enter onto the plain. You see the Ajurite symbol of a rising sun on his chestplate."),visited("attackThePaladin")?println("Ajurite Paladin: You are not welcome here. Leave at once."):(println("Ajurite Paladin: The plain of Ashard is the land of the holy Ajurites. All travellers, including yourself, are granted free-passage through this land, providing you strictly adhere to Ajurite law."),println("Ajurite Paladin: If you have come to the Plain of Ashard to prove your mettle, I'll escourt you to the arena."),button("arena","Please take me to the arena.")),button("attackTheKnight","Attack the Ajurite Paladin"),showMap();if("attackTheKnight"===this.state)return println("Ajurite Paladin: You raise your weapon against me? The Ajurites will not forgive you till your bones are ashes and those ashes are whiped from the face of the earth. Not a trace of you will remain after I am through with you. (he spits)"),this.enemies=[paladin()],this.returnToState="Plain of Ashard",setState("fightYourTurn");if("arena"===this.state)return println("The arena is a palacial, white circular stadium which you hear and smell long before your enter. The stench of human bodies pressed close together and the constant roar of the croud."),println("Your in the lobby of the arena."),visited("arenaFight")?println("Ajurite Lord: Ah. Welcome back. Will you do battle again?"):println("Ajurite Lord: (loudly) Let the next fight begin."),button("Plain of Ashard","Leave the Arena"),button("arenaFight","Challenge an opponent");if("arenaFight"===this.state)return println("Ajurite Lord: So you'd like to try your strength in the pit? Whom would you like to challenge?"),button("arenaCorruptedOrc","Fight a Corrupted Orc"),button("arenaZombie","Fight a Zombie");if("arenaCorruptedOrc"===this.state)return println("You walk out in the center of the dirt field and the croud goes silent. A grate is raised on the opposite side of the field, and a hulking orc emerges."),this.enemies=[corruptedOrc()],this.returnToState="arena",setState("fightYourTurn");if("arenaZombie"===this.state)return println("You walk out in the center of the dirt field and the croud goes silent. A grate is raised on the opposite side of the field, and a sickening zombie emerges."),this.enemies=[zombie()],this.returnToState="arena",setState("fightYourTurn")}}}.call(this),function(){var t,e,o,n,r,i,a,s,h,u,l,p,d,g,c,f,m;t=jQuery,this.run=function(){var t,e,o,n,r,i,a,s,h;for(0!==this.turn&&println("---"),console.log(this.state),o=r=0;3>=r;o=++r)for(n=i=0;3>=i;n=++i)this.map[n][o]===this.state&&(this.locX=o,this.locY=n);if("start"===this.state?setState("story"):"story"===this.state?(println("You were born in the town of Zemboria. Your father was an important "+dropDown(["Nobleman","Blacksmith","Merchant"])+". One day, when you came home, you found both of your parents brutally killed. You ask the neighbors and they tell you that they were slain by a "+dropDown(["Holy Justicar","Spider-dog","Rampaging Orc"])+". You set off on your "+dropDown(["easy","medium","hard"])+" quest to avenge their death."),println(""),button("inTown","I'm ready to begin")):"dead"===this.state&&(println("You have died : ("),println("You find yourself back in the town"),this.xp-=15,this.xp<0&&(this.xp=0),this.gp-=200,this.gp<0&&(this.gp=0),this.hp=60,println("Almerond: Stop making me revive you, young whippersnapper. I've charged you 200 gold peices for my trouble, thank you very much."),setState("mage")),townStatesRun(),mapStatesRun(),"fightYourTurn"===this.state){for(h=this.enemies,a=0,s=h.length;s>a;a++)e=h[a],button("dealDamageToEnemy","Attack "+e);button("runAway","Run Away")}else"dealDamageToEnemy"===this.state?(t=this.weapon.roll(),0===t?println("You missed!"):println("You hit him for "+t+" damage"),this.enemies[0].hp-=t,setState("fightEnemyTurn")):"fightEnemyTurn"===this.state?this.enemies[0].isDead()?setState("winBattle"):(button("evade","Evade ("+100*this.evade+"% change of evading all damage)"),button("block","Block (enemy does "+this.block+" less damage to you)")):"runAway"===this.state?(t=this.enemies[0].weapon.roll(),0===t?println("You sucessfully run away and take no damage"):println("You take "+t+" damage as you are running away"),this.hp-=t,setState(loadState())):"evade"===this.state?(prob(this.evade)?prob(.1)?println("With ninja skills of ninjaness, you dodged the attack."):println("You've evaded the attack!"):(t=this.enemies[0].roll(),println("You failed to evade and took "+t+" damage")),setState("fightYourTurn")):"block"===this.state?(t=this.enemies[0].roll(),t-=this.block,0>=t?println("You completely blocked the attack, and recieve 0 damage."):(println("You took "+t+" damage"),this.hp-=t),setState("fightYourTurn")):"winBattle"===this.state?(this.enemies[0].gp>0?(println("You looted "+this.enemies[0].gp+" gold off the body"),this.gp+=this.enemies[0].gp):println("You found nothing on the body"),0!==this.enemies[0].xp&&(println("You gained "+this.enemies[0].xp+" xp from the battle"),this.xp+=this.enemies[0].xp),this.enemies=[],setState(loadState())):this.hp<=0&&setState("dead");return this.statesEntered.push(this.state),this.turn++},p=new Die(1,6,0),f=new Die(1,10,0),m=new Die(1,20,0),r=new Die(1,100,0),g=new Die(2,200,-100),u=new Die(4,200,-200),a=new Die(6,300,-300),o=new Die(12,400,-500),d=new Die(3,6,-3),h=new Die(6,6,-6),i=new Die(9,9,-9),e=new Die(15,12,-2),c=new Die(4,5,20),l=new Die(8,5,40),s=new Die(12,7,60),n=new Die(15,15,80),this.map=[["Plain of Ashard","Spider Forest","Lake Mysterious","Eora River"],["foothills","forest","marshes","Amazon"],["desert","town of Zemboria","swamp","deeper swamp"],["wasteland","Beara Mountains","Zealon Dungeon","Dangerous Forest"]],this.locX=1,this.locY=2,this.returnToState=void 0,this.enemies=[],this.state="start",this.hp=60,this.mp=50,this.gp=300,this.xp=0,this.block=2,this.evade=.2,this.turn=0,this.inventory=[new HealthPotion,new HealthPotion],this.weapon=new Weapon(d,"Short Sword",10),this.statesEntered=[],t(function(){return refresh(),run()})}.call(this);